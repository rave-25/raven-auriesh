if (self.CavalryLogger) { CavalryLogger.start_js(["yikPxbD"]); }

__d("MessengerCreateCallConferenceForP2PMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerCreateCallConferenceForP2pResponsePayload",kind:"LinkedField",name:"messenger_create_call_conference_for_p2p",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conference_name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerCreateCallConferenceForP2PMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerCreateCallConferenceForP2PMutation",selections:b},params:{id:"3500559656720962",metadata:{},name:"MessengerCreateCallConferenceForP2PMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MessengerMaybeCreateCallConferenceForP2PMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerMaybeCreateCallConferenceForP2pResponsePayload",kind:"LinkedField",name:"messenger_maybe_create_call_conference_for_p2p",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conference_name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerMaybeCreateCallConferenceForP2PMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerMaybeCreateCallConferenceForP2PMutation",selections:b},params:{id:"4464044696994818",metadata:{},name:"MessengerMaybeCreateCallConferenceForP2PMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MessengerPrefixConferenceNameMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerCreateCallConferenceResponsePayload",kind:"LinkedField",name:"messenger_create_call_conference",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conference_name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerPrefixConferenceNameMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerPrefixConferenceNameMutation",selections:b},params:{id:"2343115872389286",metadata:{},name:"MessengerPrefixConferenceNameMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MessengerCreateCallConferenceForP2PMutation",["MessengerCreateCallConferenceForP2PMutation.graphql","Promise","cr:1012418"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c,d){return new(b("Promise"))(function(e){b("cr:1012418").commitMutation(a,{mutation:h!==void 0?h:h=b("MessengerCreateCallConferenceForP2PMutation.graphql"),onCompleted:function(a){a=(a=a==null?void 0:(a=a.messenger_create_call_conference_for_p2p)==null?void 0:a.conference_name)!=null?a:null;return e(a)},optimisticUpdater:null,variables:{input:{audio_only:c==="audio",peer_id:d}}})})}g["default"]=a}),98);
__d("MessengerMaybeCreateCallConferenceForP2PMutation",["MessengerMaybeCreateCallConferenceForP2PMutation.graphql","Promise","cr:1012418"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c,d){return new(b("Promise"))(function(e){b("cr:1012418").commitMutation(a,{mutation:h!==void 0?h:h=b("MessengerMaybeCreateCallConferenceForP2PMutation.graphql"),onCompleted:function(a){a=(a=a==null?void 0:(a=a.messenger_maybe_create_call_conference_for_p2p)==null?void 0:a.conference_name)!=null?a:null;return e(a)},optimisticUpdater:null,variables:{input:{audio_only:c==="audio",peer_id:d}}})})}g["default"]=a}),98);
__d("MessengerPrefixConferenceNameMutation",["MessengerPrefixConferenceNameMutation.graphql","Promise","cr:1012418"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){return new(b("Promise"))(function(d,e){b("cr:1012418").commitMutation(a,{mutation:h!==void 0?h:h=b("MessengerPrefixConferenceNameMutation.graphql"),onCompleted:function(a){a=(a=a==null?void 0:(a=a.messenger_create_call_conference)==null?void 0:a.conference_name)!=null?a:null;if(a!==null)return d(a);else return e(new Error("Conference name in undefined"))},optimisticUpdater:null,variables:{input:{thread_fbid:c}}})})}g["default"]=a}),98);
__d("XVideoCallController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/incall/",{peer_id:{type:"FBID",required:!0},call_id:{type:"Int"},is_caller:{type:"Bool",defaultValue:!1},audio_only:{type:"Bool",defaultValue:!1},nonce:{type:"String"},meeting_id:{type:"Int"},meeting_pass:{type:"String"},initialize_video:{type:"Bool",defaultValue:!0},locale:{type:"String"}})}),null);
__d("ZenonUriBuilder",["FBLogger","MessengerCreateCallConferenceForP2PMutation","MessengerMaybeCreateCallConferenceForP2PMutation","MessengerPrefixConferenceNameMutation","RTWebIncomingRingConfiguration","UserAgent","XGroupCallController","XVideoCallController","ZenonCallWindowErrors","ZenonForceP2PUsingMWPP","ZenonSignalingProtocol","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.__environment=a}var e=a.prototype;e.getCallUri=function(a){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:f=null;h.t0=a.thread.type;h.next=h.t0===1?4:h.t0===2?21:25;break;case 4:if(!(a.context&&a.context.controllerParams)){h.next=8;break}a.context.controllerParams.configuration===c("ZenonSignalingProtocol").MW&&(f=a.context.controllerParams.callContext);h.next=11;break;case 8:h.next=10;return b("regeneratorRuntime").awrap(this.__maybeGetConferenceNameForP2PCall(a));case 10:f=h.sent;case 11:if(!(f!==null)){h.next=17;break}h.next=14;return b("regeneratorRuntime").awrap(this.__getUriForMultiwayCall(a,{conferenceName:f}));case 14:e=h.sent;h.next=20;break;case 17:h.next=19;return b("regeneratorRuntime").awrap(this.__getUriForP2PCall(a));case 19:e=h.sent;case 20:return h.abrupt("break",26);case 21:h.next=23;return b("regeneratorRuntime").awrap(this.__getUriForMultiwayCall(a));case 23:e=h.sent;return h.abrupt("break",26);case 25:throw new(d("ZenonCallWindowErrors").UnsupportedThreadTypeError)();case 26:g=new URLSearchParams(window.location.search);e.setString("locale",g.get("locale"));return h.abrupt("return",e.getURI());case 29:case"end":return h.stop()}},null,this)};e.__getUriForP2PCall=function(a){var d,e,f,g,h;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:d=a.callID,e=a.invitees,f=a.mediaType,g=a.nonce,h=a.thread;return b.abrupt("return",c("XVideoCallController").getURIBuilder().setFBID("peer_id",h.id).setInt("call_id",d).setBool("is_caller",e.length>0).setBool("audio_only",f==="audio").setString("nonce",g).setBool("initialize_video",f==="video"));case 2:case"end":return b.stop()}},null,this)};e.__getUriForMultiwayCall=function(a,e){var f,g,h,i,j,k,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:f=a.callID,g=a.context,h=a.invitees,i=a.mediaType,j=a.nonce,k=a.thread;e===void 0&&(e={});if(!(g&&g.controllerParams)){q.next=9;break}l=g.controllerParams.callContext;m=g.controllerParams.serverInfoData;if(!(l==null)){q.next=7;break}throw new(d("ZenonCallWindowErrors").IncompleteControllerParamsError)();case 7:q.next=31;break;case 9:m=g==null?void 0:(n=g.existingCall)==null?void 0:n.server_info_data;if(!(e.conferenceName!==void 0)){q.next=14;break}l=e.conferenceName;q.next=31;break;case 14:o=0;case 15:if(!(o<3)){q.next=29;break}q.prev=16;q.next=19;return b("regeneratorRuntime").awrap(c("MessengerPrefixConferenceNameMutation")(this.__environment.relayEnvironment,k.id));case 19:l=q.sent;return q.abrupt("break",29);case 23:q.prev=23,q.t0=q["catch"](16),c("FBLogger")("rtc_www").catching(q.t0).warn("Failed to fetch Messenger conference name for group call");case 26:o++;q.next=15;break;case 29:if(!(l==null)){q.next=31;break}throw new(d("ZenonCallWindowErrors").ConferenceNameMutationFailedError)();case 31:p=c("XGroupCallController").getURIBuilder().setString("call_context",l).setInt("call_id",f).setFBIDSet("users_to_ring",[].concat(h)).setBool("has_video",i==="video").setBool("initialize_video",i==="video").setString("server_info_data",m).setString("nonce",j);this.$1(p);return q.abrupt("return",p);case 34:case"end":return q.stop()}},null,this,[[16,23]])};e.__maybeGetConferenceNameForP2PCall=function(a){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=a.mediaType,f=a.thread;if(d("RTWebIncomingRingConfiguration").isSupportedClientForProtocol(c("ZenonSignalingProtocol").MW)){g.next=3;break}return g.abrupt("return",null);case 3:g.prev=3;if(!(f==null)){g.next=6;break}return g.abrupt("return",null);case 6:if(!(c("ZenonForceP2PUsingMWPP")(e)||c("UserAgent").isBrowser("Safari")&&c("gkx")("1451")||c("UserAgent").isBrowser("Firefox")&&c("gkx")("1746980"))){g.next=12;break}g.next=9;return b("regeneratorRuntime").awrap(c("MessengerCreateCallConferenceForP2PMutation")(this.__environment.relayEnvironment,e,f.id));case 9:return g.abrupt("return",g.sent);case 12:g.next=14;return b("regeneratorRuntime").awrap(c("MessengerMaybeCreateCallConferenceForP2PMutation")(this.__environment.relayEnvironment,e,f.id));case 14:return g.abrupt("return",g.sent);case 15:g.next=21;break;case 17:g.prev=17;g.t0=g["catch"](3);c("FBLogger")("rtc_www").catching(g.t0).warn("Failed to fetch Messenger conference name for P2P call");return g.abrupt("return",null);case 21:case"end":return g.stop()}},null,this,[[3,17]])};e.$1=function(a){if(!c("gkx")("1439080"))return;var b=new URLSearchParams(window.location.search),d=["gk_enable","gk_disable","multiway_www_tier","multiway_core_tier"];d.forEach(function(c){return a.setString(c,b.get(c))});d=this.$2(b);a.setStringToStringMap("qe",Object.fromEntries(d))};e.$2=function(a){var b=/^(qe)\[(.*?)\]$/,c=new Map();for(var a=a.entries(),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=f[0];if(b.test(g)){f=f[1];g=g.substring(3,g.lastIndexOf("]"));c.set(g,f)}}return c};return a}();g["default"]=a}),98);